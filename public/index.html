<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teki Test Bot</title>
  <meta name="description" content="Prepare for tech tests with Teki. Practice questions and answers on various tech topics.">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Source+Code+Pro:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #1e1e1e;
      color: #d4d4d4;
    }
    #chat-container {
      background: #252526;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
      width: 100%;
      max-width: 400px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    #chat {
      height: 300px;
      overflow-y: auto;
      border: 1px solid #3c3c3c;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      background-color: #1e1e1e;
      font-family: 'Source Code Pro', monospace;
    }
    #chat div {
      margin-bottom: 10px;
    }
    .user {
      text-align: right;
      color: #ffffff;
      background-color: #007acc;
      padding: 8px 12px;
      border-radius: 15px;
      display: inline-block;
    }
    .bot {
      text-align: left;
      color: #ffffff;
      background-color: #2d2d2d;
      padding: 8px 12px;
      border-radius: 15px;
      display: inline-block;
    }
    #messageInput {
      width: calc(100% - 80px);
      padding: 10px;
      border: 1px solid #3c3c3c;
      border-radius: 5px;
      outline: none;
      color: #d4d4d4;
      background-color: #1e1e1e;
    }
    #sendBtn {
      padding: 10px 20px;
      background-color: #007acc;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      margin-left: 10px;
      outline: none;
      font-family: 'Roboto', sans-serif;
    }
    #sendBtn:hover {
      background-color: #005999;
    }
  </style>
</head>
<body>
  <div id="chat-container">
    <div id="chat"></div>
    <div style="display: flex;">
      <input type="text" id="messageInput" placeholder="Type a message..." />
      <button id="sendBtn">Send</button>
    </div>
  </div>

  <script>
    document.getElementById('sendBtn').addEventListener('click', () => {
      const message = document.getElementById('messageInput').value;
      if (message.trim() !== '') {
        addMessage('user', message);
        sendMessageToBot(message);
        document.getElementById('messageInput').value = '';
      }
    });

    document.getElementById('messageInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        document.getElementById('sendBtn').click();
      }
    });

    function addMessage(sender, message) {
      const chat = document.getElementById('chat');
      const messageDiv = document.createElement('div');
      messageDiv.className = sender;
      messageDiv.innerText = message;
      chat.appendChild(messageDiv);
      chat.scrollTop = chat.scrollHeight;
    }

    async function sendMessageToBot(message) {
      const response = await fetch('/chat', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ message })
      });
      const data = await response.json();
      addMessage('bot', data.response);
      askNextQuestion();
    }

    function askNextQuestion() {
      const questions = [
        "What is React?",
        "Can you explain React components?",
        "What is state in React?",
        "What are props in React?",
        "What is JSX?",
        "What are React lifecycle methods?",
        "What is the useEffect hook in React?",
        "What is the virtual DOM?",
        "What is React Router?",
        "What is Redux?"
      ];

      const chat = document.getElementById('chat');
      const botMessages = chat.getElementsByClassName('bot');

      if (botMessages.length < questions.length) {
        setTimeout(() => {
          addMessage('bot', questions[botMessages.length]);
        }, 1000);
      } else {
        setTimeout(() => {
          addMessage('bot', "Thank you for the chat!");
        }, 1000);
      }
    }

    window.onload = () => {
      askNextQuestion();
    };
  </script>
</body>
</html>
